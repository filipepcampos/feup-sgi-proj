<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">tp1/MySceneGraph.js | sgi</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="## Group T04G05 | Name                          | Number    | E-Mail                   | | ----------------------------- | --------- | ------------------------ | | Filipe Pinto Campos           | 201905609 | up201905609@edu.fe.up.pt | | Francisco Gon&#xE7;alves Cerqueira | 201905337 | up201905337@edu.fe.up.pt |"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="sgi"><meta property="twitter:description" content="## Group T04G05 | Name                          | Number    | E-Mail                   | | ----------------------------- | --------- | ------------------------ | | Filipe Pinto Campos           | 201905609 | up201905609@edu.fe.up.pt | | Francisco Gon&#xE7;alves Cerqueira | 201905337 | up201905337@edu.fe.up.pt |"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a href="https://git.fe.up.pt/sgi-meic/sgi-2022-2023/t04/sgi-t04-g05.git">Repository</a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/MyInterface.js~MyInterface.html">MyInterface</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/MySceneGraph.js~MySceneGraph.html">MySceneGraph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/XMLscene.js~XMLscene.html">XMLscene</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#models">models</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/models/Color.js~Color.html">Color</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/models/Coordinate3D.js~Coordinate3D.html">Coordinate3D</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/models/Rotation.js~Rotation.html">Rotation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/models/SceneData.js~SceneData.html">SceneData</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#models-graph">models/graph</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/models/graph/ComponentNode.js~ComponentNode.html">ComponentNode</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/models/graph/PrimitiveNode.js~PrimitiveNode.html">PrimitiveNode</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#models-wrappers">models/wrappers</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/models/wrappers/MyLight.js~MyLight.html">MyLight</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/models/wrappers/MyMaterial.js~MyMaterial.html">MyMaterial</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/models/wrappers/MySpotLight.js~MySpotLights.html">MySpotLights</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/models/wrappers/MyTexture.js~MyTexture.html">MyTexture</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/models/wrappers/MyTransformation.js~MyTransformation.html">MyTransformation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/models/wrappers/MyView.js~MyView.html">MyView</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#parser">parser</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/AmbientParser.js~AmbientParser.html">AmbientParser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/BlockParser.js~BlockParser.html">BlockParser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/ColorParser.js~ColorParser.html">ColorParser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/Coordinate3DParser.js~Coordinate3DParser.html">Coordinate3DParser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/FloatParser.js~FloatParser.html">FloatParser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/GenericChildParser.js~GenericChildParser.html">GenericChildParser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/IntegerParser.js~IntegerParser.html">IntegerParser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/LightsParser.js~LightsParser.html">LightsParser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/MaterialParser.js~MaterialParser.html">MaterialParser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/ParserErrorPrinter.js~ParserErrorPrinter.html">ParserErrorPrinter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/ParserResult.js~ParserResult.html">ParserResult</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/PrimitiveParser.js~PrimitiveParser.html">PrimitiveParser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/RotationParser.js~RotationParser.html">RotationParser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/TextureParser.js~TextureParser.html">TextureParser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/TransformationParser.js~TransformationParser.html">TransformationParser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/ViewParser.js~ViewParser.html">ViewParser</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#parser-component">parser/component</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/component/ComponentChildrenParser.js~ComponentChildrenParser.html">ComponentChildrenParser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/component/ComponentParser.js~ComponentParser.html">ComponentParser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/parser/component/ComponentsLinker.js~ComponentsLinker.html">ComponentsLinker</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#primitives">primitives</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/primitives/MyCylinder.js~MyCylinder.html">MyCylinder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/primitives/MyRectangle.js~MyRectangle.html">MyRectangle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/primitives/MySphere.js~MySphere.html">MySphere</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/primitives/MyTorus.js~MyTorus.html">MyTorus</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/primitives/MyTriangle.js~MyTriangle.html">MyTriangle</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#rendering">rendering</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/rendering/MaterialUpdater.js~MaterialUpdater.html">MaterialUpdater</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tp1/rendering/SceneRenderer.js~SceneRenderer.html">SceneRenderer</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">tp1/MySceneGraph.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import { CGFXMLreader } from &apos;../lib/CGF.js&apos;;
import {SceneData} from &quot;./models/SceneData.js&quot;;
import {ComponentsLinker} from &quot;./parser/component/ComponentsLinker.js&quot;;
import {ParserErrorPrinter} from &quot;./parser/ParserErrorPrinter.js&quot;;
import {GenericChildParser} from &quot;./parser/GenericChildParser.js&quot;;
import {TransformationParser} from &quot;./parser/TransformationParser.js&quot;;
import {MaterialParser} from &quot;./parser/MaterialParser.js&quot;;
import {ComponentParser} from &quot;./parser/component/ComponentParser.js&quot;;
import {PrimitiveParser} from &quot;./parser/PrimitiveParser.js&quot;;
import {TextureParser} from &quot;./parser/TextureParser.js&quot;;
import {ViewParser} from &quot;./parser/ViewParser.js&quot;;
import { LightsParser } from &apos;./parser/LightsParser.js&apos;;
import {AmbientParser} from &quot;./parser/AmbientParser.js&quot;;
import { MyView } from &apos;./models/wrappers/MyView.js&apos;;


// Order of the groups in the XML document.
const SCENE_INDEX = 0;
const VIEWS_INDEX = 1;
const AMBIENT_INDEX = 2;
const LIGHTS_INDEX = 3;
const TEXTURES_INDEX = 4;
const MATERIALS_INDEX = 5;
const TRANSFORMATIONS_INDEX = 6;
const PRIMITIVES_INDEX = 7;
const COMPONENTS_INDEX = 8;

/**
 * MySceneGraph class, representing the scene graph.
 */
export class MySceneGraph {
    /**
     * @constructor
     */
    constructor(filename, scene) {
        this.loadedOk = null;

        // Establish bidirectional references between scene and graph.
        this.scene = scene;
        this.sceneData = new SceneData(scene);
        scene.sceneData = this.sceneData;

        this.axisCoords = [];
        this.axisCoords[&apos;x&apos;] = [1, 0, 0];
        this.axisCoords[&apos;y&apos;] = [0, 1, 0];
        this.axisCoords[&apos;z&apos;] = [0, 0, 1];

        // File reading 
        this.reader = new CGFXMLreader();

        /*
         * Read the contents of the xml file, and refer to this class for loading and error handlers.
         * After the file is read, the reader calls onXMLReady on this object.
         * If any error occurs, the reader calls onXMLError on this object, with an error message
         */
        this.reader.open(&apos;scenes/&apos; + filename, this);
    }

    /*
     * Callback to be executed after successful reading
     */
    onXMLReady() {
        this.log(&quot;XML Loading finished.&quot;);
        const rootElement = this.reader.xmlDoc.documentElement;

        // Here should go the calls for different functions to parse the various blocks
        const error = this.parseXMLFile(rootElement);

        if (error != null) {
            this.onXMLError(error);
            return;
        }

        this.loadedOk = true;

        // As the graph loaded ok, signal the scene so that any additional initialization depending on the graph can take place
        this.scene.onGraphLoaded();
    }

    /**
     * Parses the XML file, processing each block.
     * @param {XML root element} rootElement
     */
    parseXMLFile(rootElement) {
        if (rootElement.nodeName != &quot;sxs&quot;)
            return &quot;root tag &lt;sxs&gt; missing&quot;;

        const nodes = rootElement.children;

        // Reads the names of the nodes to an auxiliary buffer.
        let nodeNames = [];

        for (let i = 0; i &lt; nodes.length; i++) {
            nodeNames.push(nodes[i].nodeName);
        }

        let error;

        // Processes each node, verifying errors.
        // &lt;scene&gt;
        let index;
        if ((index = nodeNames.indexOf(&quot;scene&quot;)) == -1)
            return &quot;tag &lt;scene&gt; missing&quot;;
        else {
            if (index != SCENE_INDEX)
                this.onXMLMinorError(&quot;tag &lt;scene&gt; out of order &quot; + index);

            //Parse scene block
            if ((error = this.parseScene(nodes[index])) != null)
                return error;
        }

        // &lt;views&gt;
        if ((index = nodeNames.indexOf(&quot;views&quot;)) == -1)
            return &quot;tag &lt;views&gt; missing&quot;;
        else {
            if (index != VIEWS_INDEX)
                this.onXMLMinorError(&quot;tag &lt;views&gt; out of order&quot;);

            //Parse views block
            if ((error = this.parseView(nodes[index])) != null)
                return error;
        }

        // &lt;ambient&gt;
        if ((index = nodeNames.indexOf(&quot;ambient&quot;)) == -1)
            return &quot;tag &lt;ambient&gt; missing&quot;;
        else {
            if (index != AMBIENT_INDEX)
                this.onXMLMinorError(&quot;tag &lt;ambient&gt; out of order&quot;);

            //Parse ambient block
            if ((error = this.parseAmbient(nodes[index])) != null)
                return error;
        }

        // &lt;lights&gt;
        if ((index = nodeNames.indexOf(&quot;lights&quot;)) == -1)
            return &quot;tag &lt;lights&gt; missing&quot;;
        else {
            if (index != LIGHTS_INDEX)
                this.onXMLMinorError(&quot;tag &lt;lights&gt; out of order&quot;);

            //Parse lights block
            if ((error = this.parseLights(nodes[index])) != null)
                return error;
        }
        // &lt;textures&gt;
        if ((index = nodeNames.indexOf(&quot;textures&quot;)) == -1)
            return &quot;tag &lt;textures&gt; missing&quot;;
        else {
            if (index != TEXTURES_INDEX)
                this.onXMLMinorError(&quot;tag &lt;textures&gt; out of order&quot;);

            //Parse textures block
            if ((error = this.parseTextures(nodes[index])) != null)
                return error;
        }

        // &lt;materials&gt;
        if ((index = nodeNames.indexOf(&quot;materials&quot;)) == -1)
            return &quot;tag &lt;materials&gt; missing&quot;;
        else {
            if (index != MATERIALS_INDEX)
                this.onXMLMinorError(&quot;tag &lt;materials&gt; out of order&quot;);

            //Parse materials block
            if ((error = this.parseMaterials(nodes[index])) != null)
                return error;
        }

        // &lt;transformations&gt;
        if ((index = nodeNames.indexOf(&quot;transformations&quot;)) == -1)
            return &quot;tag &lt;transformations&gt; missing&quot;;
        else {
            if (index != TRANSFORMATIONS_INDEX)
                this.onXMLMinorError(&quot;tag &lt;transformations&gt; out of order&quot;);

            //Parse transformations block
            if ((error = this.parseTransformations(nodes[index])) != null)
                return error;
        }

        // &lt;primitives&gt;
        if ((index = nodeNames.indexOf(&quot;primitives&quot;)) == -1)
            return &quot;tag &lt;primitives&gt; missing&quot;;
        else {
            if (index != PRIMITIVES_INDEX)
                this.onXMLMinorError(&quot;tag &lt;primitives&gt; out of order&quot;);

            //Parse primitives block
            if ((error = this.parsePrimitives(nodes[index])) != null)
                return error;
        }

        // &lt;components&gt;
        if ((index = nodeNames.indexOf(&quot;components&quot;)) == -1)
            return &quot;tag &lt;components&gt; missing&quot;;
        else {
            if (index != COMPONENTS_INDEX)
                this.onXMLMinorError(&quot;tag &lt;components&gt; out of order&quot;);

            //Parse components block
            if ((error = this.parseComponents(nodes[index])) != null)
                return error;
        }
        this.log(&quot;all parsed&quot;);
    }

    /**
     * Parses the &lt;scene&gt; block. 
     * @param {scene block element} sceneNode
     */
    parseScene(sceneNode) {

        // Get root of the scene.
        let root = this.reader.getString(sceneNode, &apos;root&apos;)
        if (root == null)
            return &quot;no root defined for scene&quot;;

        this.sceneData.root = root;

        // Get axis length        
        let axis_length = this.reader.getFloat(sceneNode, &apos;axis_length&apos;);
        if (axis_length == null)
            this.onXMLMinorError(&quot;no axis_length defined for scene; assuming &apos;length = 1&apos;&quot;);

        this.sceneData.referenceLength = axis_length || 1;

        return null;
    }

    /**
     * Parses the &lt;views&gt; block.
     * @param {view block element} viewsNode
     */
    parseView(viewsNode) {
        let result = GenericChildParser.parse(viewsNode, this.reader, this.scene, ViewParser, &quot;view&quot;);
        ParserErrorPrinter.print(result.getErrors());
        console.log(&quot;Views&quot;, result);
        this.sceneData.views = result.getValue();

        let defaultView = this.reader.getString(viewsNode, &apos;default&apos;);
        this.sceneData.defaultView = this.reader.getString(viewsNode, &apos;default&apos;);

        if(defaultView == null || !(defaultView in Object.keys(this.sceneData.views)) ) {
            if(Object.keys(this.sceneData.views).length &gt; 0) {
                defaultView = Object.keys(this.sceneData.views)[0];
                this.onXMLMinorError(&quot;no default view defined, defaulting to view with id=&quot; + defaultView);
            } else {
                defaultView = &apos;default_view&apos;;
                this.sceneData.views[&apos;default_view&apos;] = MyView.instantiate(&apos;default_view&apos;, 1.5, 0.1, 500, vec3.fromValues(15, 15, 15), vec3.fromValues(0, 0, 0));
                this.onXMLMinorError(&quot;no default view defined and no views were defined, creating a default view&quot;);
            }
        }

        this.sceneData.defaultView = defaultView;

        return null;
    }

    /**
     * Parses the &lt;ambient&gt; node.
     * @param {ambient block element} ambientsNode
     */
    parseAmbient(ambientsNode) {
        let result = AmbientParser.parse(ambientsNode, this.reader);
        ParserErrorPrinter.print(result.getErrors());
        console.log(&quot;Ambient&quot;, result);
        this.sceneData.ambient = result.getValue()[&apos;ambient&apos;];
        this.sceneData.background = result.getValue()[&apos;background&apos;];
        return null;
    }

    /**
     * Parses the &lt;light&gt; node.
     * @param {lights block element} lightsNode
     */
    parseLights(lightsNode) {
        let result = LightsParser.parse(lightsNode, this.reader);
        this.sceneData.lights = result.getValue();
        ParserErrorPrinter.print(result.getErrors());
        console.log(&quot;Lights&quot;, result.getValue());
        return null;
    }

    /**
     * Parses the &lt;textures&gt; block. 
     * @param {textures block element} texturesNode
     */
    parseTextures(texturesNode) {
        let result = GenericChildParser.parse(texturesNode, this.reader, this.scene, TextureParser, &quot;texture&quot;);
        this.sceneData.textures = result.getValue();
        console.log(&quot;Textures&quot;, result);
        return null;
    }

    /**
     * Parses the &lt;materials&gt; node.
     * @param {materials block element} materialsNode
     */
    parseMaterials(materialsNode) {
        let result = GenericChildParser.parse(materialsNode, this.reader, this.scene, MaterialParser, &quot;material&quot;);
        this.sceneData.materials = result.getValue();
        console.log(&quot;Materials&quot;, result);
        return null;
    }

    /**
     * Parses the &lt;transformations&gt; block.
     * @param {transformations block element} transformationsNode
     */
    parseTransformations(transformationsNode) {
        let result = GenericChildParser.parse(transformationsNode, this.reader, this.scene, TransformationParser, &quot;transformation&quot;);
        this.sceneData.transformations = result.getValue();
        ParserErrorPrinter.print(result.getErrors());
        console.log(&quot;Transformations&quot;, result);
        return null;
    }

    /**
     * Parses the &lt;primitives&gt; block.
     * @param {primitives block element} primitivesNode
     */
    parsePrimitives(primitivesNode) {
        let result = GenericChildParser.parse(primitivesNode, this.reader, this.scene, PrimitiveParser, &quot;primitive&quot;);
        this.sceneData.primitives = result.getValue();
        console.log(&quot;Primitives&quot;, result);
        return null;
    }

    /**
   * Parses the &lt;components&gt; block.
   * @param {components block element} componentsNode
   */
    parseComponents(componentsNode) {
        let result = GenericChildParser.parse(componentsNode, this.reader, this.sceneData, ComponentParser, &quot;component&quot;);
        ParserErrorPrinter.print(result.getErrors());
        this.sceneData.components = result.getValue();

        console.log(&quot;Linking child components&quot;);
        ParserErrorPrinter.print(ComponentsLinker.link(this.sceneData));

        console.log(&quot;Components&quot;, result);
        return null;
    }

    /**
     * Parse the color components from a node
     * @param {block element} node
     * @param {message to be displayed in case of error} messageError
     */
    parseColor(node, messageError) {
        var color = [];

        // R
        var r = this.reader.getFloat(node, &apos;r&apos;);
        if (!(r != null &amp;&amp; !isNaN(r) &amp;&amp; r &gt;= 0 &amp;&amp; r &lt;= 1))
            return &quot;unable to parse R component of the &quot; + messageError;

        // G
        var g = this.reader.getFloat(node, &apos;g&apos;);
        if (!(g != null &amp;&amp; !isNaN(g) &amp;&amp; g &gt;= 0 &amp;&amp; g &lt;= 1))
            return &quot;unable to parse G component of the &quot; + messageError;

        // B
        var b = this.reader.getFloat(node, &apos;b&apos;);
        if (!(b != null &amp;&amp; !isNaN(b) &amp;&amp; b &gt;= 0 &amp;&amp; b &lt;= 1))
            return &quot;unable to parse B component of the &quot; + messageError;

        // A
        var a = this.reader.getFloat(node, &apos;a&apos;);
        if (!(a != null &amp;&amp; !isNaN(a) &amp;&amp; a &gt;= 0 &amp;&amp; a &lt;= 1))
            return &quot;unable to parse A component of the &quot; + messageError;

        color.push(...[r, g, b, a]);

        return color;
    }

    /*
     * Callback to be executed on any read error, showing an error on the console.
     * @param {string} message
     */
    onXMLError(message) {
        console.error(&quot;XML Loading Error: &quot; + message);
        this.loadedOk = false;
    }

    /**
     * Callback to be executed on any minor error, showing a warning on the console.
     * @param {string} message
     */
    onXMLMinorError(message) {
        console.warn(&quot;Warning: &quot; + message);
    }

    /**
     * Callback to be executed on any message.
     * @param {string} message
     */
    log(message) {
        console.log(&quot;   &quot; + message);
    }
}</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
